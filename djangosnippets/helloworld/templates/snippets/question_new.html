{% extends 'snippets/base.html' %}

{% block content %}
<div class="d-flex justify-content-center align-items-center" style="min-height:70vh;">
    <div class="card shadow p-4" style="min-width:380px; max-width:540px; width:100%;">
        <div class="mb-3 text-center">
            <i class="bi bi-patch-question" style="font-size:2.2rem; color:#0d6efd;"></i>
            <h2 class="fw-bold mt-2 mb-1">新しい質問を投稿</h2>
            <div class="text-muted small mb-2">学習や疑問を気軽に投稿しましょう！</div>
        </div>
        <form method="post">
            {% csrf_token %}
            <!-- 科目選択 -->
            <div class="mb-3">
                <label class="form-label fw-semibold" for="id_subject">科目</label>
                <select name="subject" id="id_subject" class="form-control" required>
                    <option value="">-- 選択してください --</option>
                    <option value="数学" {% if form.subject.value == '数学' %}selected{% endif %}>数学</option>
                    <option value="物理" {% if form.subject.value == '物理' %}selected{% endif %}>物理</option>
                    <option value="プログラミング" {% if form.subject.value == 'プログラミング' %}selected{% endif %}>プログラミング</option>
                    <option value="化学" {% if form.subject.value == '化学' %}selected{% endif %}>化学</option>
                    <option value="生物" {% if form.subject.value == '生物' %}selected{% endif %}>生物</option>
                    <option value="英語" {% if form.subject.value == '英語' %}selected{% endif %}>英語</option>
                    <option value="歴史" {% if form.subject.value == '歴史' %}selected{% endif %}>歴史</option>
                    <option value="地理" {% if form.subject.value == '地理' %}selected{% endif %}>地理</option>
                    <option value="その他" {% if form.subject.value == 'その他' %}selected{% endif %}>その他</option>
                </select>
                {% for error in form.subject.errors %}
                    <div class="text-danger small">{{ error }}</div>
                {% endfor %}
            </div>
            <!-- タイトル -->
            <div class="mb-3">
                <label class="form-label fw-semibold" for="id_title">タイトル</label>
                <input type="text" name="title" id="id_title" class="form-control" value="{{ form.title.value|default_if_none:'' }}">
                {% for error in form.title.errors %}
                    <div class="text-danger small">{{ error }}</div>
                {% endfor %}
            </div>
            <!-- 本文 -->
            <div class="mb-3">
                <label class="form-label fw-semibold" for="id_body">本文</label>
                <textarea name="body" id="id_body" class="form-control" rows="7">{{ form.body.value|default_if_none:'' }}</textarea>
                {% for error in form.body.errors %}
                    <div class="text-danger small">{{ error }}</div>
                {% endfor %}
            </div>
            <button type="submit" class="btn btn-primary w-100 fw-bold py-2">
                <i class="bi bi-send"></i> 質問を投稿
            </button>
        </form>
        <div class="mt-3 text-center">
            <a href="{% url 'question_list' %}" class="text-decoration-none">
                <i class="bi bi-arrow-left"></i> Q&A一覧に戻る
            </a>
        </div>
    </div>
</div>
{% endblock %}
